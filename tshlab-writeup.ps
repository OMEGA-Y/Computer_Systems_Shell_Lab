%!PS-Adobe-2.0
%%Creator: dvips(k) 5.95a Copyright 2005 Radical Eye Software
%%Title: writeup.dvi
%%Pages: 11
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Courier Times-Italic CMSY10
%%+ Courier-Oblique
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o writeup.ps writeup.dvi
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2010.03.02:2315
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "30 October 2002",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 15 /bullet put
dup 110 /backslash put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC57036431151EC603C8BCFE359BBD953AD
5F3D998C6EE18EABCDD31D35C7E933DEA008418A4F0845FC9A361328AB270359
C974485C9BCBCB1E9EBBF3ACC647C4108F7E05961E22390303FD667A2294F500
7A085C407876060C7B8583F57849FA24B596194B61DFEA86D73001470B9331CF
9883EC171BD83263C7E20619B8C2AF6DDBC6502C4D9FFDF9B96C888ED8560FD3
B935AB23824A4C8CC9FF153F13C43139F956AA1FF21F89D670229ED5D6CE3C3F
A79E49D65D8C42470D086F330522514265CEFBE8CF5FBBE840EDBC4AB7BE4549
C37DDF51972EA0927AA95FAA7E7C36E4434AD5C3EE98AB2EF979D68C11C8E026
72B121CAA2A16F71810323B17A32D8FE0568D922203E82E54E6047B11B66D0C8
474630A3DFDB74DD3E5340F40B0B724EAC5780C0E2013D62CA6236
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (writeup.dvi)
@start /Fa 139[72 72 10[72 104[{TeXBase1Encoding ReEncodeFont}3
119.552 /Courier rf /Fb 144[55 4[55 7[55 98[{
TeXBase1Encoding ReEncodeFont}3 90.9091 /Courier-Oblique
rf /Fc 105[45 28[45 2[45 51 30 35 40 1[51 45 51 76 25
51 30 25 51 45 30 40 51 40 51 45 11[66 61 51 66 2[71
66 86 3[35 3[61 10[30 8[45 45 25 23 46[{TeXBase1Encoding ReEncodeFont}
37 90.9091 /Times-Bold rf /Fd 134[50 3[50 50 50 50 1[50
50 50 50 50 1[50 50 50 1[50 50 50 50 50 50 3[50 1[50
28[50 1[50 12[50 1[50 6[50 38[{TeXBase1Encoding ReEncodeFont}26
83.022 /Courier-Oblique rf /Fe 134[50 50 1[50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 2[50 1[50 4[50 50 50 50 50 1[50 50 50 11[50 3[50 50
50 1[50 50 50 1[50 50 50 50 50 50 50 50 50 50 50 1[50
50 50 50 50 2[50 1[50 33[{TeXBase1Encoding ReEncodeFont}60
83.022 /Courier rf /Ff 145[45 94[45 15[{}2 90.9091 /CMSY10
rf /Fg 134[40 4[25 35 35 2[45 45 66 25 1[25 25 45 1[25
40 45 40 45 45 26[56 70[{TeXBase1Encoding ReEncodeFont}18
90.9091 /Times-Italic rf /Fh 131[55 1[55 55 55 55 55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 55 4[55 7[55 55 2[55 1[55 1[55 2[55 55 55 2[55
55 4[55 1[55 2[55 1[55 55 55 55 1[55 55 55 55 55 55 55
1[55 55 55 1[55 55 1[55 35[{TeXBase1Encoding ReEncodeFont}58
90.9091 /Courier rf /Fi 107[40 40 24[40 45 45 66 45 45
25 35 30 45 45 45 45 71 25 45 25 25 45 45 30 40 45 40
45 40 3[30 1[30 1[66 66 86 66 66 56 51 61 1[51 66 66
81 56 1[35 30 66 66 51 56 66 61 61 66 1[40 4[25 45 45
45 45 45 45 45 45 45 45 25 23 30 23 2[30 30 30 5[30 29[51
51 2[{TeXBase1Encoding ReEncodeFont}75 90.9091 /Times-Roman
rf /Fj 135[60 86 60 66 40 47 53 1[66 60 66 1[33 66 1[33
66 60 40 53 66 53 1[60 7[86 1[120 1[86 80 66 3[93 2[80
2[47 93 93 73 80 1[86 1[86 6[40 60 60 60 60 60 60 60
60 60 46[66 2[{TeXBase1Encoding ReEncodeFont}45 119.552
/Times-Bold rf /Fk 135[72 104 1[72 40 56 48 1[72 72 72
112 40 2[40 72 72 1[64 72 1[72 64 7[104 1[135 1[104 88
80 2[80 104 1[128 88 5[80 1[104 2[104 6[40 72 2[72 72
1[72 72 72 72 2[48 36 44[{TeXBase1Encoding ReEncodeFont}40
143.462 /Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 1355 937 a Fk(15-213,)34 b(Spring)h(2010)470
1120 y(Lab)g(Assignment)e(L5:)44 b(Writing)35 b(Y)-16
b(our)35 b(Own)g(Unix)g(Shell)439 1303 y(Assigned:)43
b(Mon,)34 b(Mar)h(1,)h(Due:)43 b(T)-6 b(ue,)34 b(Mar)h(23,)g(11:59PM)
432 1485 y(Last)g(Possible)f(T)-5 b(ime)35 b(to)g(T)-6
b(urn)34 b(in:)44 b(Fri,)36 b(Apr)f(26,)g(11:59PM)0 2197
y Fj(1)119 b(Intr)n(oduction)0 2443 y Fi(The)30 b(purpose)i(of)d(this)i
(assignment)h(is)e(to)g(become)h(more)f(f)o(amiliar)h(with)f(the)g
(concepts)i(of)e(process)i(control)g(and)e(sig-)0 2556
y(nalling.)g(Y)-10 b(ou')o(ll)24 b(do)f(this)h(by)f(writing)h(a)f
(simple)g(Unix)h(shell)g(program)g(that)f(supports)j(job)d(control)i
(and)f(I/O)e(redirection.)0 2669 y(Please)i(read)g(the)g(whole)g
(writeup)g(before)h(starting.)0 2999 y Fj(2)119 b(Logistics)0
3245 y Fi(This)25 b(is)f(an)h(indi)n(vidual)i(project.)34
b(Y)-10 b(ou)24 b(should)j(do)e(this)g(lab)g(on)g(one)g(of)f(the)h
(Fish)g(machines.)34 b(As)24 b(al)o(w)o(ays,)h(clari\002cations)0
3358 y(and)f(corrections)j(will)c(be)g(posted)i(on)f(the)g(Autolab)h
(message)f(board.)0 3688 y Fj(3)119 b(Hand)31 b(Out)f(Instructions)0
3934 y Fi(Do)n(wnload)d(the)f(\002le)f Fh(tshlab-handout.)o(ta)o(r)19
b Fi(from)26 b(Autolab,)h(and)g(cop)o(y)g(it)e(to)h(the)g(protected)j
(directory)f(\(the)f Fg(lab)0 4047 y(dir)m(ectory)p Fi(\))f(in)d(which)
h(you)g(plan)h(to)e(do)h(your)g(w)o(ork.)29 b(Then)23
b(do)h(the)g(follo)n(wing)h Fg(on)f(a)f(F)l(ish)g(mac)o(hine)p
Fi(:)136 4288 y Ff(\017)46 b Fi(T)-7 b(ype)24 b(the)f(command)i
Fh(tar)53 b(xvf)g(tshlab-handout.)o(ta)o(r)17 b Fi(to)23
b(e)o(xpand)i(the)f(tar)n(-\002le.)136 4473 y Ff(\017)46
b Fi(T)-7 b(ype)24 b(your)g(name)g(and)g(Andre)n(w)f(ID)f(in)i(the)g
(header)h(comment)f(at)f(the)h(top)g(of)f Fh(tsh.c)p
Fi(.)136 4657 y Ff(\017)46 b Fi(T)-7 b(ype)24 b(the)f(command)i
Fh(make)c Fi(to)i(compile)i(and)f(link)g(the)g(dri)n(v)o(er)l(,)g(the)g
(trace)g(interpreter)l(,)j(and)d(the)f(test)h(routines.)0
4898 y(Looking)g(at)f(the)g Fh(tsh.c)d Fi(\()p Fg(tiny)k(shell)p
Fi(\))g(\002le,)e(you)i(will)e(see)h(that)h(it)f(contains)i(a)d(sk)o
(eleton)j(of)e(a)g(simple)g(Unix)g(shell.)30 b(It)22
b(will)0 5011 y(not,)28 b(of)f(course,)i(function)g(as)e(a)f(shell)i
(if)f(you)h(compile)g(and)f(run)h(it)e(no)n(w)-6 b(.)39
b(T)-7 b(o)26 b(help)h(you)h(get)f(started,)i(we)e(ha)n(v)o(e)g
(already)0 5124 y(implemented)c(the)e(less)h(interesting)i(functions)f
(such)f(as)f(the)g(routines)j(that)d(manipulate)i(the)f(job)f(list)g
(and)h(the)f(command)0 5237 y(line)26 b(parser)-5 b(.)37
b(Y)-10 b(our)25 b(assignment)j(is)e(to)f(complete)j(the)e(remaining)h
(empty)f(functions)i(listed)f(belo)n(w)-6 b(.)36 b(As)24
b(a)i(sanity)h(check)0 5350 y(for)g(you,)i(we')-5 b(v)o(e)27
b(listed)h(the)g(approximate)h(number)f(of)f(lines)h(of)f(code)h(for)g
(each)f(of)g(these)i(functions)g(in)e(our)h(reference)0
5463 y(solution)e(\(which)e(includes)i(lots)e(of)f(comments,)h(this)g
(is)g(a)f(good)h(thing\).)1924 5712 y(1)p eop end
%%Page: 2 2
TeXDict begin 2 1 bop 136 573 a Ff(\017)46 b Fh(eval)p
Fi(:)33 b(Main)27 b(routine)h(that)g(parses)g(and)f(interprets)i(the)e
(command)g(line.)39 b([300)27 b(lines,)h(including)i(some)d(helper)227
686 y(functions])136 873 y Ff(\017)46 b Fh(sigchld)p
617 873 28 4 v 30 w(handler)p Fi(:)25 b(Catches)g(SIGCHLD)20
b(signals.)31 b([80)24 b(lines])136 1061 y Ff(\017)46
b Fh(sigint)p 562 1061 V 30 w(handler)p Fi(:)26 b(Catches)e(SIGINT)e
(\()p Fh(ctrl-c)p Fi(\))e(signals.)31 b([15)24 b(lines])136
1249 y Ff(\017)46 b Fh(sigtstp)p 617 1249 V 30 w(handler)p
Fi(:)25 b(Catches)g(SIGTSTP)20 b(\()p Fh(ctrl-z)p Fi(\))h(signals.)30
b([15)24 b(lines])0 1462 y(When)g(you)g(wish)f(to)h(test)g(your)g
(shell,)g(type)h Fh(make)c Fi(to)i(recompile)i(it.)k(T)-7
b(o)22 b(run)i(it,)f(type)h Fh(tsh)e Fi(to)h(the)h(command)g(line:)199
1676 y Fe(linux>)49 b(./tsh)199 1775 y(tsh>)g Fd([type)g(commands)g(to)
g(your)g(shell)g(here])0 2107 y Fj(4)119 b(General)31
b(Ov)o(er)o(view)f(of)f(Unix)i(Shells)0 2353 y Fi(A)24
b Fc(shell)h Fi(is)g(an)g(interacti)n(v)o(e)i(command-line)h
(interpreter)g(that)d(runs)h(programs)h(on)e(behalf)h(of)f(the)h(user)
-5 b(.)34 b(A)23 b(shell)j(repeat-)0 2466 y(edly)d(prints)h(a)e
(prompt,)h(w)o(aits)g(for)g(a)f Fc(command)f(line)h Fi(on)h
Fh(stdin)p Fi(,)c(and)k(then)h(carries)g(out)e(some)h(action,)h(as)e
(directed)j(by)0 2579 y(the)f(contents)i(of)d(the)h(command)g(line.)0
2731 y(The)36 b(command)i(line)f(is)g(a)f(sequence)j(of)e(ASCII)e(te)o
(xt)i(w)o(ords)g(delimited)h(by)f(whitespace.)71 b(The)36
b(\002rst)g(w)o(ord)h(in)g(the)0 2844 y(command)20 b(line)g(is)g
(either)h(the)e(name)h(of)g(a)f(b)n(uilt-in)i(command)g(or)e(the)h
(pathname)h(of)f(an)f(e)o(x)o(ecutable)j(\002le.)27 b(The)19
b(remaining)0 2957 y(w)o(ords)24 b(are)g(command-line)i(ar)n(guments:)
136 3184 y Ff(\017)46 b Fi(If)30 b(the)g(\002rst)f(w)o(ord)h(is)f(a)g
(b)n(uilt-in)j(command,)g(the)e(shell)g(immediately)h(e)o(x)o(ecutes)h
(the)d(command)i(in)e(the)h(current)227 3297 y(process.)136
3484 y Ff(\017)46 b Fi(Otherwise,)27 b(the)f(w)o(ord)f(is)h(assumed)h
(to)e(be)h(the)f(pathname)j(of)d(an)h(e)o(x)o(ecutable)h(program.)36
b(In)26 b(this)g(case,)g(the)g(shell)227 3597 y(forks)f(a)e(child)h
(process,)i(then)e(loads)g(and)g(runs)h(the)f(program)g(in)g(the)g
(conte)o(xt)h(of)e(the)h(child.)0 3824 y(The)30 b(child)h(processes)h
(created)g(as)e(a)f(result)j(of)d(interpreting)34 b(a)29
b(single)j(command)f(line)f(are)g(kno)n(wn)h(collecti)n(v)o(ely)h(as)e
(a)0 3937 y Fc(job)p Fi(.)35 b(In)26 b(general,)i(a)e(job)g(can)h
(consist)g(of)f(multiple)h(child)g(processes)i(connected)g(by)d(Unix)g
(pipes.)37 b(Ho)n(we)n(v)o(er)l(,)26 b(the)g(shell)0
4050 y(you)e(write)g(in)f(this)h(lab)g(need)g(not)g(support)i(pipes.)0
4202 y(If)g(the)g(command)h(line)g(ends)g(with)f(an)g(ampersand)i(\223)
p Fh(&)p Fi(\224,)e(then)h(the)f(job)h(runs)g(in)f(the)g
Fc(backgr)n(ound)p Fi(,)g(which)h(means)f(that)0 4315
y(the)h(shell)g(does)h(not)f(w)o(ait)f(for)h(the)g(job)g(to)f
(terminate)j(before)f(printing)g(the)f(prompt)h(and)f(a)o(w)o(aiting)g
(the)g(ne)o(xt)g(command)0 4428 y(line.)42 b(Otherwise,)30
b(the)e(job)g(runs)h(in)f(the)g Fc(f)n(or)n(egr)n(ound)p
Fi(,)i(which)e(means)g(that)h(the)f(shell)h(w)o(aits)f(for)g(the)g(job)
h(to)e(terminate)0 4540 y(before)i(a)o(w)o(aiting)g(the)f(ne)o(xt)h
(command)f(line.)43 b(Thus,)28 b(at)g(an)o(y)g(point)h(in)f(time,)g(at)
g(most)g(one)g(job)h(can)f(be)g(running)i(in)e(the)0
4653 y(fore)o(ground.)j(Ho)n(we)n(v)o(er)l(,)24 b(an)f(arbitrary)j
(number)e(of)g(jobs)g(can)g(run)g(in)f(the)h(background.)0
4792 y(F)o(or)f(e)o(xample,)h(typing)h(the)f(command)g(line)199
5006 y Fe(tsh>)49 b Fd(jobs)0 5219 y Fi(causes)25 b(the)f(shell)g(to)g
(e)o(x)o(ecute)g(the)g(b)n(uilt-in)i Fh(jobs)21 b Fi(command.)29
b(T)-7 b(yping)24 b(the)g(command)g(line)199 5433 y Fe(tsh>)49
b Fd(/bin/ls)g(-l)g(-d)1924 5712 y Fi(2)p eop end
%%Page: 3 3
TeXDict begin 3 2 bop 0 573 a Fi(runs)33 b(the)g Fh(ls)d
Fi(program)k(in)e(the)h(fore)o(ground.)58 b(By)32 b(con)l(v)o(ention,)
37 b(the)c(shell)g(ensures)h(that)f(when)g(the)f(program)i(be)o(gins)0
672 y(e)o(x)o(ecuting)25 b(its)f(main)g(routine)199 878
y Fe(int)50 b(main\(int)e(argc,)h(char)1395 893 y(*)1445
878 y(argv[]\))0 1083 y Fi(the)24 b Fh(argc)d Fi(and)j
Fh(argv)d Fi(ar)n(guments)k(ha)n(v)o(e)g(the)e(follo)n(wing)i(v)n
(alues:)199 1288 y Fe(argc)49 b(==)h(3)199 1387 y(argv[0])f(==)g
(``/bin/ls'')199 1487 y(argv[1]==)f(``-l'')199 1587 y(argv[2]==)g
(``-d'')0 1792 y Fi(Alternati)n(v)o(ely)-6 b(,)26 b(typing)f(the)f
(command)g(line)199 1997 y Fe(tsh>)49 b Fd(/bin/ls)g(-l)g(-d)h(&)0
2215 y Fi(runs)24 b(the)g Fh(ls)e Fi(program)j(in)e(the)h(background.)0
2367 y(Unix)c(shells)g(support)i(the)e(notion)h(of)e
Fc(job)g(contr)n(ol)p Fi(,)i(which)f(allo)n(ws)g(users)h(to)e(mo)o(v)o
(e)g(jobs)h(back)h(and)f(forth)g(between)h(back-)0 2480
y(ground)29 b(and)f(fore)o(ground,)i(and)e(to)f(change)i(the)e(process)
i(state)f(\(running,)i(stopped,)g(or)d(terminated\))j(of)d(the)g
(processes)0 2593 y(in)c(a)h(job)l(.)29 b(F)o(or)23 b(e)o(xample,)136
2812 y Ff(\017)46 b Fi(T)-7 b(yping)28 b Fh(ctrl-c)23
b Fi(causes)28 b(a)f(SIGINT)e(signal)j(to)f(be)g(deli)n(v)o(ered)h(to)f
(each)h(process)g(in)f(the)g(fore)o(ground)j(job)l(.)39
b(The)227 2925 y(def)o(ault)26 b(action)e(for)g(SIGINT)e(is)h(to)h
(terminate)h(the)f(process.)136 3109 y Ff(\017)46 b Fi(Similarly)-6
b(,)23 b(typing)g Fh(ctrl-z)18 b Fi(causes)23 b(a)e(SIGTSTP)e(signal)k
(to)e(be)h(deli)n(v)o(ered)h(to)f(each)g(process)i(in)d(the)h(fore)o
(ground)227 3222 y(job)l(.)33 b(The)24 b(def)o(ault)i(action)g(for)e
(SIGTSTP)e(is)i(to)h(place)g(a)f(process)i(in)f(the)g(stopped)h(state,)
f(where)g(it)f(remains)i(until)227 3335 y(it)e(is)f(a)o(w)o(ak)o(ened)i
(by)f(the)f(receipt)i(of)f(a)f(SIGCONT)e(signal.)0 3553
y(Unix)j(shells)g(also)h(pro)o(vide)g(v)n(arious)g(b)n(uilt-in)g
(commands)g(that)f(support)i(job)d(control.)31 b(F)o(or)23
b(e)o(xample:)136 3771 y Ff(\017)46 b Fh(jobs)p Fi(:)27
b(List)c(the)h(running)h(and)f(stopped)i(background)h(jobs.)136
3956 y Ff(\017)46 b Fh(bg)54 b Fb(job)r Fi(:)27 b(Change)e(a)e(stopped)
i(background)i(job)d(into)g(a)f(running)j(background)h(job)l(.)136
4140 y Ff(\017)46 b Fh(fg)54 b Fb(job)r Fi(:)27 b(Change)e(a)e(stopped)
i(or)f(running)h(background)i(job)d(into)g(a)f(running)j(fore)o(ground)
g(job)l(.)136 4324 y Ff(\017)46 b Fh(kill)53 b Fb(job)r
Fi(:)27 b(T)-6 b(erminate)24 b(a)f(job)l(.)0 4529 y(Unix)g(shells)i
(also)f(support)i(the)e(notion)h(of)e Fc(I/O)g(r)n(edir)n(ection)p
Fi(,)i(which)f(allo)n(ws)g(users)g(to)g(redirect)h Fh(stdin)c
Fi(and)i Fh(stdout)0 4629 y Fi(to)g(disk)i(\002les.)j(F)o(or)23
b(e)o(xample,)h(typing)h(the)f(command)g(line)199 4834
y Fe(tsh>)49 b Fd(/bin/ls)g(>)g(foo)0 5039 y Fi(redirects)26
b(the)e(output)h(of)e Fh(ls)f Fi(to)h(a)g(\002le)g(called)i
Fh(foo)p Fi(.)i(Similarly)-6 b(,)199 5244 y Fe(tsh>)49
b Fd(/bin/cat)g(<)g(foo)0 5463 y Fi(displays)26 b(the)e(contents)h(of)f
(\002le)f Fh(foo)e Fi(on)j Fh(stdout)p Fi(.)1924 5712
y(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop 0 573 a Fj(5)119 b(The)31 b Fa(tsh)e
Fj(Speci\002cation)0 819 y Fi(Y)-10 b(our)24 b Fh(tsh)d
Fi(shell)j(should)i(ha)n(v)o(e)e(the)g(follo)n(wing)h(features:)136
1058 y Ff(\017)46 b Fi(The)23 b(prompt)i(should)g(be)e(the)h(string)h
(\223)p Fh(tsh>)53 b Fi(\224.)136 1242 y Ff(\017)46 b
Fi(The)24 b(command)g(line)g(typed)h(by)f(the)g(user)g(should)i
(consist)f(of)f(a)f Fh(name)e Fi(and)k(zero)f(or)g(more)f(ar)n
(guments,)j(all)e(sepa-)227 1355 y(rated)h(by)g(one)f(or)g(more)g
(spaces.)32 b(If)24 b Fh(name)e Fi(is)h(a)h(b)n(uilt-in)i(command,)f
(then)g Fh(tsh)d Fi(should)k(handle)f(it)f(immediately)227
1468 y(and)34 b(w)o(ait)f(for)g(the)g(ne)o(xt)h(command)g(line.)57
b(Otherwise,)36 b Fh(tsh)31 b Fi(should)k(assume)f(that)f
Fh(name)e Fi(is)i(the)g(path)h(of)f(an)227 1581 y(e)o(x)o(ecutable)d
(\002le,)d(which)g(it)g(loads)h(and)g(runs)g(in)f(the)g(conte)o(xt)i
(of)e(an)g(initial)h(child)h(process)f(\(In)g(this)f(conte)o(xt,)j(the)
227 1693 y(term)g Fg(job)h Fi(refers)h(to)e(this)h(initial)h(child)f
(process\).)51 b(If)30 b(you)h(are)g(running)h(system)f(programs)h(lik)
o(e)f Fh(ls)p Fi(,)f(you)h(will)227 1806 y(need)25 b(to)e(enter)i(the)e
(full)h(path)h(\(in)e(this)h(case)h Fh(/bin/ls)p Fi(\))19
b(because)26 b(your)e(shell)h(does)f(not)g(ha)n(v)o(e)g(search)h
(paths.)136 1977 y Ff(\017)46 b Fh(tsh)22 b Fi(need)i(not)g(support)h
(pipes)g(\()p Fh(|)p Fi(\),)e(b)n(ut)h Fc(MUST)d Fi(support)k(I/O)e
(redirection)k(\(\223)p Fh(<)p Fi(\224)c(and)h(\223)p
Fh(>)p Fi(\224\),)f(for)h(instance:)427 2176 y Fe(tsh>)49
b Fd(/bin/cat)f(<)i(foo)f(>)g(bar)227 2388 y Fi(Y)-10
b(our)24 b(shell)g(must)g(support)h(both)g(input)f(and)g(output)h
(redirection)i(in)c(the)h(same)g(command)g(line.)136
2572 y Ff(\017)46 b Fi(T)-7 b(yping)26 b Fh(ctrl-c)21
b Fi(\()p Fh(ctrl-z)p Fi(\))g(should)27 b(cause)e(a)g(SIGINT)d
(\(SIGTSTP\))h(signal)j(to)e(be)h(sent)g(to)g(the)g(current)h(fore-)227
2685 y(ground)g(job,)e(as)f(well)h(as)f(an)o(y)h(descendants)j(of)d
(that)g(job)g(\(e.g.,)f(an)o(y)h(child)h(processes)h(that)f(it)e(fork)o
(ed\).)31 b(If)23 b(there)i(is)227 2798 y(no)f(fore)o(ground)i(job,)e
(then)g(the)g(signal)h(should)g(ha)n(v)o(e)f(no)g(ef)n(fect.)136
2981 y Ff(\017)46 b Fi(If)34 b(the)h(command)g(line)f(ends)h(with)f(an)
g(ampersand)j Fh(&)p Fi(,)e(then)g Fh(tsh)d Fi(should)k(run)e(the)h
(job)f(in)g(the)h(background.)227 3094 y(Otherwise,)24
b(it)g(should)h(run)f(the)g(job)f(in)h(the)g(fore)o(ground.)136
3278 y Ff(\017)46 b Fi(Each)26 b(job)g(can)g(be)g(identi\002ed)h(by)f
(either)h(a)e(process)j(ID)c(\(PID\))h(or)h(a)f(job)h(ID)f(\(JID\),)h
(which)g(is)f(a)g(positi)n(v)o(e)j(inte)o(ger)227 3391
y(assigned)e(by)e Fh(tsh)p Fi(.)j(JIDs)d(should)h(be)f(denoted)h(on)f
(the)g(command)g(line)h(by)e(the)h(pre\002x)g(')p Fh(\045)p
Fi('.)29 b(F)o(or)23 b(e)o(xample,)h(\223)p Fh(\0455)p
Fi(\224)227 3504 y(denotes)29 b(JID)d(5,)h(and)h(\223)p
Fh(5)p Fi(\224)e(denotes)j(PID)c(5.)39 b(\(W)-7 b(e)26
b(ha)n(v)o(e)i(pro)o(vided)h(you)e(with)g(all)g(of)f(the)i(routines)h
(you)e(need)h(for)227 3616 y(manipulating)f(the)d(job)g(list.\))136
3800 y Ff(\017)46 b Fh(tsh)22 b Fi(should)j(support)g(the)f(follo)n
(wing)h(b)n(uilt-in)h(commands:)336 3983 y Fc(\226)46
b Fi(The)23 b Fh(quit)e Fi(command)k(terminates)g(the)f(shell.)336
4125 y Fc(\226)46 b Fi(The)23 b Fh(jobs)e Fi(command)k(lists)f(all)f
(background)k(jobs.)336 4267 y Fc(\226)46 b Fi(The)31
b Fh(bg)53 b Fb(job)31 b Fi(command)h(restarts)h Fg(job)e
Fi(by)g(sending)i(it)d(a)h(SIGCONT)d(signal,)34 b(and)d(then)h(runs)f
(it)g(in)g(the)427 4380 y(background.)h(The)23 b Fg(job)h
Fi(ar)n(gument)i(can)e(be)f(either)i(a)e(PID)f(or)i(a)f(JID.)336
4522 y Fc(\226)46 b Fi(The)31 b Fh(fg)53 b Fb(job)31
b Fi(command)h(restarts)h Fg(job)e Fi(by)g(sending)i(it)d(a)h(SIGCONT)d
(signal,)34 b(and)d(then)h(runs)f(it)g(in)g(the)427 4635
y(fore)o(ground.)h(The)23 b Fg(job)h Fi(ar)n(gument)h(can)f(be)g
(either)g(a)f(PID)g(or)g(a)g(JID.)136 4805 y Ff(\017)46
b Fi(Y)-10 b(our)24 b(shell)g(should)h(be)f(able)g(to)g(redirect)h(the)
f(output)h(from)e(the)h Fh(jobs)d Fi(b)n(uilt-in)26 b(command.)j(F)o
(or)23 b(e)o(xample)427 5005 y Fe(tsh>)49 b(jobs)g(>)g(foo)136
5217 y Ff(\017)d Fh(tsh)30 b Fi(should)k(reap)e(all)g(of)g(its)g
(zombie)h(children.)56 b(If)32 b(an)o(y)g(job)g(terminates)i(because)g
(it)d(recei)n(v)o(es)j(a)d(signal)i(that)227 5330 y(it)d(didn')n(t)i
(catch,)g(then)f Fh(tsh)c Fi(should)32 b(recognize)h(this)d(e)n(v)o
(ent)g(and)h(print)g(a)e(message)i(with)f(the)g(job')-5
b(s)31 b(PID)e(and)h(a)227 5443 y(description)d(of)c(the)h(of)n
(fending)i(signal.)1924 5712 y(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop 0 573 a Fj(6)119 b(Checking)32
b(Y)-13 b(our)30 b(W)-9 b(ork)0 819 y Fc(Running)25 b(y)n(our)i(shell.)
40 b Fi(The)27 b(best)h(w)o(ay)f(to)g(check)i(your)f(w)o(ork)f(is)g(to)
h(run)f(your)h(shell)h(from)e(the)g(command)h(line.)41
b(Y)-10 b(our)0 932 y(initial)28 b(testing)g(should)h(be)d(done)i
(manually)g(from)e(the)h(command)h(line.)38 b(Run)27
b(your)g(shell,)h(type)f(commands)h(to)f(it,)f(and)0
1045 y(see)e(if)f(you)h(can)g(break)h(it.)j(Use)23 b(it)h(to)f(run)h
(real)g(programs!)0 1197 y Fc(Refer)n(ence)j(solution.)35
b Fi(The)25 b(64-bit)i(Linux)f(e)o(x)o(ecutable)h Fh(tshref)22
b Fi(is)k(the)f(reference)j(solution)g(for)e(the)g(shell.)35
b(Run)25 b(this)0 1310 y(program)e(\(on)g(a)e(64-bit)j(machine\))f(to)f
(resolv)o(e)i(an)o(y)e(questions)j(you)d(ha)n(v)o(e)h(about)g(ho)n(w)f
(your)h(shell)g(should)g(beha)n(v)o(e.)30 b(Y)-10 b(our)0
1423 y(shell)23 b(should)i(emit)d(output)i(that)f(is)g(identical)i(to)d
(the)h(reference)i(solution)g(\(e)o(xcept)f(for)e(PIDs,)g(of)g(course,)
i(which)f(change)0 1536 y(from)g(run)h(to)g(run\).)0
1688 y(Once)36 b(you)g(are)g(con\002dent)h(that)f(your)h(shell)f(is)g
(w)o(orking,)j(then)e(you)f(can)g(be)o(gin)g(to)g(use)g(some)g(tools)g
(that)g(we)f(ha)n(v)o(e)0 1801 y(pro)o(vided)28 b(to)d(help)h(you)g
(check)h(your)g(w)o(ork)e(more)h(thoroughly)-6 b(.)38
b(\(These)26 b(are)g(the)g(same)f(tools)i(that)f(the)g(autograder)i
(will)0 1913 y(use)c(when)g(you)g(submit)g(your)g(w)o(ork)g(for)g
(credit.\))0 2066 y Fc(T)-7 b(race)31 b(inter)o(pr)n(eter)-9
b(.)49 b Fi(W)-7 b(e)29 b(ha)n(v)o(e)i(pro)o(vided)h(a)d(set)h(of)g
(trace)h(\002les)f(\()p Fh(trace)2430 2081 y(*)2485 2066
y(.txt)p Fi(\))25 b(that)30 b(v)n(alidate)i(the)e(correctness)j(of)0
2178 y(your)h(shell)f(\(the)h(appendix)h(section)g(at)d(the)i(end)f(of)
g(this)g(handout)i(describes)g(each)f(trace)g(\002le)e(brie\003y\).)57
b(Each)33 b(trace)0 2291 y(\002le)26 b(tests)h(one)g(shell)h(feature.)
39 b(F)o(or)25 b(e)o(xample,)j(does)f(your)h(shell)f(recognize)i(a)d
(particular)j(b)n(uilt-in)g(command?)39 b(Does)26 b(it)0
2404 y(respond)g(correctly)f(to)f(the)g(user)g(typing)h(a)e
Fh(ctrl-c)p Fi(?.)0 2543 y(The)d Fh(runtrace)15 b Fi(program)21
b(\(the)g(trace)g(interpreter\))i(interprets)f(a)e(set)g(of)g(shell)h
(commands)g(speci\002ed)g(by)f(a)g(single)h(trace)0 2643
y(\002le:)0 2835 y Fe(linux>)49 b(./runtrace)f(-h)0 2935
y(Usage:)h(runtrace)f(-f)h(<file>)g(-s)h(<shellprog>)d([-hV])0
3034 y(Options:)100 3134 y(-h)597 b(Print)49 b(this)g(message)100
3233 y(-s)g(<shell>)198 b(Shell)49 b(program)f(to)i(test)f(\(default)f
(./tsh\))100 3333 y(-f)h(<file>)248 b(Trace)49 b(file)100
3433 y(-V)597 b(Be)49 b(more)h(verbose)0 3625 y Fi(The)22
b(neat)h(thing)h(about)g(the)f(trace)g(\002les)f(is)h(that)g(the)o(y)g
(generate)h(the)f(same)g(output)h(you)f(w)o(ould)g(ha)n(v)o(e)g(gotten)
h(had)f(you)h(run)0 3725 y(your)g(shell)h(interacti)n(v)o(ely)h(\(e)o
(xcept)f(for)f(an)g(initial)g(comment)h(that)f(identi\002es)h(the)f
(trace\).)29 b(F)o(or)23 b(e)o(xample:)0 3917 y Fe(linux>)49
b(./runtrace)f(-f)h(trace05.txt)f(-s)h(./tsh)0 4016 y(#)0
4116 y(#)h(trace05.txt)d(-)j(Run)f(a)h(background)e(job.)0
4216 y(#)0 4315 y(tsh>)h(./myspin1)f(&)0 4415 y([1])h(\(15849\))g
(./myspin1)f(&)0 4515 y(tsh>)h(quit)0 4720 y Fi(The)29
b(lo)n(wer)n(-numbered)j(trace)e(\002les)f(do)g(v)o(ery)h(simple)g
(tests,)h(and)f(the)f(higher)n(-numbered)34 b(tests)c(do)f
(increasingly)k(more)0 4833 y(complicated)26 b(tests.)0
4972 y Fc(Shell)c(dri)o(v)o(er)-9 b(.)29 b Fi(After)23
b(you)h(ha)n(v)o(e)f(used)h Fh(runtrace)19 b Fi(to)j(test)i(your)g
(shell)f(on)h(each)f(trace)h(\002le)e(indi)n(vidually)-6
b(,)27 b(then)c(you)h(are)0 5071 y(ready)i(to)e(test)h(your)h(shell)f
(with)g(the)f(shell)i(dri)n(v)o(er)-5 b(.)32 b(The)25
b Fh(sdriver)20 b Fi(program)26 b(uses)f Fh(runtrace)20
b Fi(to)25 b(run)g(your)g(shell)h(on)0 5171 y(each)d(trace)h(\002le,)e
(compares)i(the)f(output)i(to)d(the)h(output)i(produced)g(by)e(the)g
(reference)i(shell,)e(displays)i(the)e Fh(diff)d Fi(if)j(the)o(y)0
5271 y(dif)n(fer)l(,)h(and)g(optionally)j(sends)e(the)e(results)j(to)d
(the)h(Autolab)g(serv)o(er:)0 5463 y Fe(linux>)49 b(./sdriver)f(-h)1924
5712 y Fi(5)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 0 573 a Fe(Usage:)49 b(sdriver)f([-hV])h([-s)g
(<shell>)g(-t)g(<tracenum>)f(-i)i(<iters>])0 672 y(Options)0
772 y(-h)548 b(Print)48 b(this)i(message.)0 872 y(-i)f(<iters>)149
b(Run)49 b(each)g(trace)g(<iters>)f(times)h(\(default)f(4\))0
971 y(-s)h(<shell>)149 b(Name)49 b(of)g(test)g(shell)g(\(default)f
(./tsh\))0 1071 y(-t)h(<n>)349 b(Run)49 b(trace)g(<n>)g(only)g
(\(default)f(all\))0 1171 y(-V)548 b(Be)49 b(more)g(verbose.)0
1372 y Fi(Running)36 b(the)f(dri)n(v)o(er)g(without)g(an)o(y)g(ar)n
(guments)h(tests)g(your)f(shell)g(on)g(all)f(of)h(the)g(trace)g
(\002les.)61 b(T)-7 b(o)33 b(help)j(detect)f(race)0 1472
y(conditions)27 b(in)c(your)i(code,)f(the)g(dri)n(v)o(er)g(runs)h(each)
f(trace)h(multiple)g(times.)k(Y)-10 b(ou)24 b(will)f(need)h(to)g(pass)g
(each)h(of)f(the)f(tests)i(to)0 1571 y(get)f(credit)h(for)e(a)g
(particular)j(trace:)0 1773 y Fe(linux>)49 b(./sdriver)0
1872 y(Running)g(4)g(iters)g(of)g(trace00.txt)0 1972
y(1.)g(Running)g(trace00.txt...)0 2071 y(2.)g(Running)g(trace00.txt...)
0 2171 y(3.)g(Running)g(trace00.txt...)0 2271 y(4.)g(Running)g
(trace00.txt...)0 2370 y(Running)g(4)g(iters)g(of)g(trace01.txt)0
2470 y(1.)g(Running)g(trace01.txt...)0 2570 y(2.)g(Running)g
(trace01.txt...)0 2669 y(3.)g(Running)g(trace01.txt...)0
2769 y(4.)g(Running)g(trace01.txt...)0 2868 y(Running)g(4)g(iters)g(of)
g(trace02.txt)0 2968 y(1.)g(Running)g(trace02.txt...)0
3068 y(2.)g(Running)g(trace02.txt...)0 3167 y(3.)g(Running)g
(trace02.txt...)0 3267 y(4.)g(Running)g(trace02.txt...)0
3466 y(...)0 3665 y(Running)g(4)g(iters)g(of)g(trace23.txt)0
3765 y(1.)g(Running)g(trace23.txt...)0 3865 y(2.)g(Running)g
(trace23.txt...)0 3964 y(3.)g(Running)g(trace23.txt...)0
4064 y(4.)g(Running)g(trace23.txt...)0 4164 y(Running)g(4)g(iters)g(of)
g(trace24.txt)0 4263 y(1.)g(Running)g(trace24.txt...)0
4363 y(2.)g(Running)g(trace24.txt...)0 4462 y(3.)g(Running)g
(trace24.txt...)0 4562 y(4.)g(Running)g(trace24.txt...)0
4761 y(Summary:)f(25/25)h(correct)g(traces)0 4963 y Fi(Use)23
b(the)h(optional)i Fh(-i)21 b Fi(ar)n(gument)26 b(to)d(control)j(the)d
(number)i(of)e(times)h(the)g(dri)n(v)o(er)g(runs)g(each)h(trace)f
(\002le:)0 5164 y Fe(linux>)49 b(./sdriver)f(-i)h(1)0
5264 y(Running)g(trace00.txt...)0 5363 y(Running)g(trace01.txt...)0
5463 y(Running)g(trace02.txt...)1924 5712 y Fi(6)p eop
end
%%Page: 7 7
TeXDict begin 7 6 bop 0 573 a Fe(Running)49 b(trace03.txt...)0
772 y(...)0 971 y(Running)g(trace23.txt...)0 1071 y(Running)g
(trace24.txt...)0 1270 y(Summary:)f(25/25)h(correct)g(traces)0
1474 y Fi(Use)23 b(the)h(optional)i Fh(-t)21 b Fi(ar)n(gument)26
b(to)d(test)h(a)f(single)i(trace)g(\002le:)0 1678 y Fe(linux>)49
b(./sdriver)f(-t)h(06)0 1778 y(Running)g(trace06.txt...)0
1877 y(Success:)f(The)i(test)f(and)g(reference)f(outputs)h(for)g
(trace06.txt)f(matched!)0 2094 y Fi(Note:)28 b(The)22
b(dri)n(v)o(er)g(program)i(runs)e(the)g(reference)j(shell,)d(which)h
(is)f(a)f(64-bit)i(binary)-6 b(,)24 b(and)e(thus)h(will)e(not)i(run)f
(on)g(a)g(32-bit)0 2207 y(machine.)0 2537 y Fj(7)119
b(Hints)136 2779 y Ff(\017)46 b Fi(Read)27 b(and)g(understand)j(e)n(v)o
(ery)d(w)o(ord)f(of)h(Chapter)g(8)g(\(Exceptional)i(Control)e(Flo)n
(w\))f(and)h(Chapter)h(11)e(\(System-)227 2892 y(le)n(v)o(el)e(I/O\))f
(in)h(your)g(te)o(xtbook.)136 3076 y Ff(\017)46 b Fi(Read)37
b(the)h(code)f(in)g Fh(tsh.c)d Fi(carefully)40 b(before)e(you)g(start.)
69 b(Understand)40 b(the)d(high-le)n(v)o(el)i(control)g(\003o)n(w)-6
b(,)39 b(get)227 3189 y(f)o(amiliar)25 b(with)e(the)h(de\002ned)g
(global)h(v)n(ariables)h(and)e(the)g(helper)h(routines.)136
3373 y Ff(\017)46 b Fi(Play)25 b(with)h(your)g(shell)g(by)f(typing)i
(commands)g(to)e(it)g(directly)-6 b(.)36 b(Don')n(t)26
b(mak)o(e)g(the)f(mistak)o(e)i(of)e(running)i(the)f(trace)227
3486 y(generator)e(and)e(dri)n(v)o(er)g(immediately)-6
b(.)29 b(De)n(v)o(elop)22 b(some)f(f)o(amiliarity)j(and)d(intuition)j
(about)f(ho)n(w)d(your)i(shell)g(w)o(orks)227 3599 y(before)j(testing)g
(it)f(with)f(the)h(automated)h(tools.)136 3782 y Ff(\017)46
b Fi(Only)31 b(after)h(you)g(ha)n(v)o(e)g(tested)g(your)g(shell)g
(directly)h(from)e(the)g(command)h(and)f(are)h(f)o(airly)g(con\002dent)
h(that)e(it)g(is)227 3895 y(correct)25 b(should)h(you)e(start)g
(testing)h(with)e(the)h Fh(runtrace)19 b Fi(and)24 b(dri)n(v)o(er)h
(programs.)136 4079 y Ff(\017)46 b Fi(Use)36 b(the)h(trace)g(\002les)f
(to)g(guide)i(the)e(de)n(v)o(elopment)j(of)d(your)h(shell.)68
b(Starting)37 b(with)f Fh(trace00.txt)p Fi(,)e(mak)o(e)227
4192 y(sure)c(that)f(your)g(shell)h(produces)h(the)e
Fg(identical)i Fi(output)g(as)d(the)h(reference)i(shell.)46
b(Then)28 b(mo)o(v)o(e)h(on)f(to)h(trace)h(\002le)227
4305 y Fh(trace01.txt)p Fi(,)18 b(and)24 b(so)f(on.)136
4489 y Ff(\017)46 b Fi(Be)28 b(careful)j(about)f(race)g(conditions)i
(on)d(the)g(job)h(list.)45 b(Remember)29 b(that)h(you)f(cannot)i(mak)o
(e)e(an)o(y)g(assumptions)227 4602 y(about)h(the)f(order)h(of)e(e)o(x)o
(ecution)j(of)d(the)h(parent)h(and)f(child)h(after)f(forking.)46
b(In)28 b(particular)l(,)33 b(you)c(cannot)h(assume)227
4715 y(that)23 b(the)g(child)g(will)f(still)g(be)h(running)h(when)e
(the)h(parent)g(returns)h(from)e(the)h Fh(fork)p Fi(.)i(In)d(f)o(act,)h
(our)g(dri)n(v)o(er)g(has)f(code)227 4827 y(that)g(purposely)h
(introduces)h(non-determinism)g(in)c(the)h(order)h(that)f(the)g(parent)
h(and)f(child)h(e)o(x)o(ecute)g(after)f(forking.)227
4940 y(Also,)h(remember)f(that)h(signal)h(handlers)g(run)e
(concurrently)k(with)c(the)g(program)i(and)e(can)h(interrupt)h(it)e(an)
o(ywhere,)227 5053 y(unless)k(you)f(e)o(xplicitly)i(block)f(the)f
(receipt)h(of)e(the)h(signals.)136 5237 y Ff(\017)46
b Fi(The)23 b Fh(waitpid)p Fi(,)c Fh(kill)p Fi(,)h Fh(fork)p
Fi(,)g Fh(execve)p Fi(,)g Fh(setpgid)f Fi(and)24 b Fh(sigprocmask)17
b Fi(functions)26 b(will)c(come)i(in)f(v)o(ery)227 5350
y(handy)-6 b(.)40 b(The)26 b(WUNTRA)l(CED)c(and)27 b(WNOHANG)d(options)
k(to)f Fh(waitpid)22 b Fi(will)27 b(also)g(be)f(useful.)40
b(Use)26 b Fh(man)e Fi(to)227 5463 y(check)h(out)f(the)g(details)h
(about)g(each)f(function.)1924 5712 y(7)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop 136 573 a Ff(\017)46 b Fi(When)23
b(you)g(implement)g(your)g(signal)h(handlers,)g(be)f(sure)g(to)f(send)h
Fh(SIGINT)c Fi(and)j Fh(SIGTSTP)d Fi(signals)24 b(to)e(the)h(en-)227
686 y(tire)f(fore)o(ground)j(process)e(group,)g(using)g(\224)p
Fh(-pid)p Fi(\224)d(instead)j(of)e(\224)p Fh(pid)p Fi(\224)g(in)g(the)h
(ar)n(gument)i(to)d(the)h Fh(kill)d Fi(function.)227
799 y(The)k(dri)n(v)o(er)i(program)f(speci\002cally)i(tests)e(for)g
(this)g(error)-5 b(.)136 986 y Ff(\017)46 b Fi(One)22
b(of)g(the)h(trick)o(y)g(parts)g(of)f(the)h(assignment)h(is)e(deciding)
j(on)d(the)h(allocation)i(of)d(w)o(ork)g(between)h(the)g
Fh(eval)c Fi(and)227 1099 y Fh(sigchld)p 617 1099 28
4 v 30 w(handler)g Fi(functions)26 b(when)e(the)g(shell)g(is)g(w)o
(aiting)g(for)g(a)f(fore)o(ground)j(job)e(to)g(\002nish.)136
1287 y Ff(\017)46 b Fi(In)26 b Fh(eval)p Fi(,)d(the)i(parent)i(must)f
(use)f Fh(sigprocmask)20 b Fi(to)25 b(block)i Fh(SIGCHLD)p
Fi(,)21 b Fh(SIGINT)p Fi(,)h(and)k Fh(SIGTSTP)21 b Fi(signals)227
1400 y(before)j(it)f(forks)g(the)g(child,)h(and)f(then)h(unblock)g
(these)g(signals,)g(again)g(using)f Fh(sigprocmask)17
b Fi(after)24 b(it)e(adds)i(the)227 1513 y(child)h(to)e(the)h(job)g
(list)g(by)f(calling)i Fh(addjob)p Fi(.)g(Since)f(children)i(inherit)f
(the)e Fh(blocked)d Fi(v)o(ectors)25 b(of)e(their)h(parents,)227
1626 y(the)32 b(child)h(must)f(be)g(sure)g(to)g(then)h(unblock)h(these)
e(signals)i(before)f(it)f Fh(exec)p Fi(s)d(the)k(ne)n(w)e(program.)55
b(The)31 b(child)227 1738 y(should)25 b(also)g(restore)g(the)f(def)o
(ault)h(handers)g(for)f(the)g(signals)h(that)f(are)g(ignored)h(by)f
(the)g(shell.)227 1889 y(The)35 b(parent)h(needs)g(to)e(block)i
(signals)h(in)d(this)i(w)o(ay)e(in)h(order)g(to)g(a)n(v)n(oid)h(race)g
(conditions)h(\(e.g.,)g(the)e(child)h(is)227 2002 y(reaped)20
b(by)f Fh(sigchld)p 986 2002 V 30 w(handler)14 b Fi(\(and)19
b(thus)h(remo)o(v)o(ed)f(from)f(the)h(job)g(list\))h
Fg(befor)m(e)f Fi(the)g(parent)h(calls)f Fh(addjob)p
Fi(\).)227 2115 y(Section)25 b(8.5.6)e(has)h(details)h(about)g(the)f
(race)g(conditions)i(and)e(ho)n(w)f(to)h(block)h(signals)g(e)o
(xplicitly)-6 b(.)136 2302 y Ff(\017)46 b Fi(Programs)30
b(such)h(as)e Fh(top)p Fi(,)f Fh(less)p Fi(,)g Fh(vi)p
Fi(,)h(and)h Fh(emacs)c Fi(do)k(strange)h(things)g(with)e(the)g
(terminal)i(settings.)48 b(Don')n(t)227 2415 y(run)35
b(these)h(programs)g(from)f(your)h(shell.)63 b(Stick)35
b(with)f(simple)i(te)o(xt-based)h(programs)f(such)g(as)f
Fh(/bin/cat)p Fi(,)227 2528 y Fh(/bin/ls)p Fi(,)20 b
Fh(/bin/ps)p Fi(,)f(and)24 b Fh(/bin/echo)p Fi(.)136
2716 y Ff(\017)46 b Fi(When)21 b(you)h(run)f(your)h(shell)g(from)f(the)
g(standard)i(Unix)e(shell,)h(your)g(shell)g(is)e(running)j(in)e(the)g
(fore)o(ground)j(process)227 2829 y(group.)46 b(If)28
b(your)i(shell)f(then)h(creates)g(a)e(child)i(process,)h(by)e(def)o
(ault)i(that)e(child)h(will)e(also)h(be)g(a)f(member)h(of)g(the)227
2941 y(fore)o(ground)e(process)f(group.)k(Since)24 b(typing)i
Fh(ctrl-c)20 b Fi(sends)25 b(a)f(SIGINT)e(to)h(e)n(v)o(ery)i(process)g
(in)f(the)g(fore)o(ground)227 3054 y(group,)29 b(typing)f
Fh(ctrl-c)c Fi(will)i(send)i(a)e(SIGINT)f(to)i(your)g(shell,)h(as)f
(well)g(as)f(to)h(e)n(v)o(ery)g(process)i(that)e(your)h(shell)227
3167 y(created,)d(which)f(ob)o(viously)i(isn')n(t)f(correct.)227
3318 y(Here)37 b(is)f(the)h(w)o(orkaround:)59 b(After)36
b(the)h Fh(fork)p Fi(,)g(b)n(ut)h(before)g(the)f Fh(execve)p
Fi(,)f(the)h(child)h(process)g(should)g(call)227 3430
y Fh(setpgid\(0,)50 b(0\))p Fi(,)27 b(which)h(puts)g(the)f(child)i(in)e
(a)g(ne)n(w)g(process)i(group)g(whose)f(group)h(ID)d(is)i(identical)h
(to)f(the)227 3543 y(child')-5 b(s)32 b(PID.)c(This)i(ensures)i(that)e
(there)h(will)e(be)h(only)h(one)f(process,)k(your)c(shell,)i(in)e(the)g
(fore)o(ground)j(process)227 3656 y(group.)57 b(When)33
b(you)g(type)h Fh(ctrl-c)p Fi(,)d(the)i(shell)g(should)h(catch)g(the)f
(resulting)i(SIGINT)30 b(and)j(then)h(forw)o(ard)f(it)227
3769 y(to)27 b(the)g(appropriate)j(fore)o(ground)g(job)d(\(or)g(more)g
(precisely)-6 b(,)30 b(the)d(process)i(group)f(that)f(contains)i(the)e
(fore)o(ground)227 3882 y(job\).)0 4214 y Fj(8)119 b(Ev)o(aluation)0
4460 y Fi(Y)-10 b(our)24 b(score)g(will)f(be)h(computed)h(out)f(of)f(a)
h(maximum)f(of)g(110)i(points)g(based)f(on)g(the)g(follo)n(wing)h
(distrib)n(ution:)0 4687 y Fc(100)47 b Fi(Correctness:)31
b(25)24 b(trace)g(\002les)g(at)f(4)g(pts)h(each)0 4874
y Fc(10)46 b Fi(Style)29 b(points.)43 b(W)-7 b(e)27 b(e)o(xpect)i(you)g
(to)f(ha)n(v)o(e)h(good)g(comments)g(and)f(to)g(check)h(the)g(return)g
(v)n(alue)g(of)f(EVER)-6 b(Y)25 b(system)227 4987 y(call.)41
b(W)-7 b(e)26 b(also)i(e)o(xpect)g(you)g(to)g(break)g(up)f(lar)n(ge)i
(functions)h(such)e(as)f Fh(eval)e Fi(into)j(smaller)g(helper)g
(functions,)j(to)227 5100 y(enhance)26 b(readability)g(and)e(a)n(v)n
(oid)h(duplicating)i(code.)j(Some)23 b(advice)i(about)f(commenting:)336
5288 y Ff(\017)46 b Fi(Do)23 b(be)o(gin)h(each)h(routine)g(with)e(a)g
(block)i(comment)f(describing)j(its)c(role)h(at)g(a)f(high)h(le)n(v)o
(el.)336 5434 y Ff(\017)46 b Fi(Do)23 b(pref)o(ace)i(related)g(lines)g
(of)e(code)i(with)e(a)g(block)i(comment.)1924 5712 y(8)p
eop end
%%Page: 9 9
TeXDict begin 9 8 bop 336 573 a Ff(\017)46 b Fi(Do)23
b(use)h(a)f(consistent)j(indenting)h(style.)336 719 y
Ff(\017)46 b Fi(Do)23 b(k)o(eep)i(your)f(comments)g(within)g(72)g
(character)i(lines)e(\(no)g(long)h(comment)f(lines\).)336
865 y Ff(\017)46 b Fi(Don')n(t)24 b(simply)h(comment)f(each)g(line.)227
1053 y(Y)-10 b(ou)23 b(should)i(also)f(follo)n(w)f(other)h(guidelines)j
(of)c(good)h(style,)g(such)g(as)f(using)h(a)f(consistent)j(indentation)
g(scheme,)227 1166 y(using)f(descripti)n(v)o(e)h(v)n(ariable)f(names,)f
(and)g(grouping)i(logically)g(related)f(blocks)g(of)f(code)g(with)f
(whitespace.)0 1392 y(Y)-10 b(our)30 b(solution)i(shell)e(will)g(be)g
(tested)h(for)f(correctness)j(on)c(a)h(64-bit)h(\002sh)e(machine)i
(\(the)g(Autolab)f(serv)o(er\),)j(using)e(the)0 1505
y(same)20 b(dri)n(v)o(er)h(and)f(trace)h(\002les)f(that)g(were)g
(included)j(in)d(your)g(handout)j(directory)-6 b(.)30
b(Y)-10 b(our)20 b(shell)h(should)g(produce)h Fc(identical)0
1618 y Fi(output)j(on)f(these)g(traces)h(as)e(the)h(reference)i(shell,)
e(with)g(only)g(tw)o(o)f(e)o(xceptions:)136 1845 y Ff(\017)46
b Fi(The)23 b(PIDs)g(can)h(\(and)g(will\))g(be)f(dif)n(ferent.)136
2033 y Ff(\017)46 b Fi(The)29 b(output)h(of)f(the)g Fh(/bin/ps)c
Fi(commands)30 b(in)e Fh(trace19.txt)p Fi(,)c Fh(trace20.txt)p
Fi(,)g(and)30 b Fh(trace21.txt)227 2146 y Fi(will)k(be)f(dif)n(ferent)j
(from)e(run)g(to)g(run.)60 b(Ho)n(we)n(v)o(er)l(,)35
b(the)f(running)i(states)f(of)f(an)o(y)g Fh(mysplit)c
Fi(processes)36 b(in)e(the)227 2258 y(output)25 b(of)f(the)g
Fh(/bin/ps)19 b Fi(command)24 b(should)i(be)d(identical.)0
2485 y(The)g(dri)n(v)o(er)h(deals)h(with)e(all)h(of)f(these)i
(subtleties)h(when)e(it)f(checks)i(for)f(correctness.)0
2817 y Fj(9)119 b(Hand)31 b(In)f(Instructions)136 3061
y Ff(\017)46 b Fi(Mak)o(e)24 b(sure)g(you)g(ha)n(v)o(e)h(included)g
(your)g(name)e(and)h(Andre)n(w)g(ID)e(in)i(the)g(header)h(comment)f(of)
f Fh(tsh.c)p Fi(.)136 3249 y Ff(\017)46 b Fi(Hand)24
b(in)f(your)i Fh(tsh.c)20 b Fi(\002le)j(for)h(credit)g(by)g(uploading)i
(it)d(to)h(Autolab)l(.)30 b(Y)-10 b(ou)23 b(may)g(hand)i(in)e(as)h
(often)g(as)g(you)g(lik)o(e.)227 3362 y(Y)-10 b(ou)24
b(will)f(be)g(graded)i(on)f(the)g Fc(last)g Fi(v)o(ersion)h(you)f(hand)
g(in.)136 3550 y Ff(\017)46 b Fi(After)29 b(you)h(hand)g(in,)g(it)f
(tak)o(es)h(a)f(minute)h(or)f(tw)o(o)f(for)i(the)f(dri)n(v)o(er)h(to)f
(run)g(through)i(multiple)g(iterations)g(of)e(each)227
3662 y(trace)c(\002le.)136 3850 y Ff(\017)46 b Fi(W)-7
b(e')o(ll)22 b(be)f(using)h(a)f(sophisticated)k(cheat)e(check)o(er)g
(that)f(compares)h(handins)g(from)e(this)h(year)g(and)g(pre)n(vious)h
(years.)227 3963 y(Please)j(don')n(t)g(cop)o(y)g(another)h(student')-5
b(s)27 b(code.)34 b(Start)25 b(early)-6 b(,)26 b(and)f(if)g(you)h(get)f
(stuck,)h(come)f(see)g(your)h(instructors)227 4076 y(for)e(help.)0
4328 y(Good)g(luck!)1924 5712 y(9)p eop end
%%Page: 10 10
TeXDict begin 10 9 bop 0 573 a Fj(A)m(ppendix:)39 b(T)-9
b(race)30 b(Files)0 819 y Fi(The)c(trace)i(dri)n(v)o(er)f(runs)g(an)g
(instance)h(of)f(your)g(shell)h(in)e(a)g(child)i(process)g(and)f
(communicates)i(with)e(the)g(shell)g(interac-)0 932 y(ti)n(v)o(ely)f
(in)g(a)f(w)o(ay)h(that)g(mimics)g(the)g(beha)n(vior)i(of)e(a)f(user)-5
b(.)36 b(T)-7 b(o)25 b(test)h(the)g(beha)n(vior)j(of)c(your)i(shell,)g
(the)f(trace)g(dri)n(v)o(er)h(reads)0 1045 y(in)i(trace)h(\002les)e
(that)i(specify)h(shell)f(line)f(commands)h(\(that)g(are)f(actually)i
(sent)f(to)f(the)g(shell\))h(as)f(well)g(as)g(a)f(fe)n(w)g(special)0
1158 y(synchronization)33 b(commands)28 b(\(that)h(are)f(interpreted)j
(by)c(the)h(dri)n(v)o(er)h(when)f(handling)i(the)e(shell)g(process\).)
44 b(The)27 b(trace)0 1271 y(\002les)c(may)h(also)g(reference)i(a)d
(number)h(of)g(shell)g(test)g(programs)h(to)f(perform)g(v)n(arious)h
(functions,)h(and)e(you)g(may)g(refer)g(to)0 1384 y(the)g(code)g(and)g
(comments)h(of)e(these)i(test)f(programs)h(for)e(more)h(information.)0
1536 y(The)f(format)h(of)g(the)f(trace)i(\002les)e(is)g(as)h(follo)n
(ws:)136 1787 y Ff(\017)46 b Fi(The)23 b(comment)h(character)i(is)e
Fh(#)p Fi(.)j(Ev)o(erything)e(to)f(the)g(right)g(of)g(it)f(on)h(a)f
(line)h(is)f(ignored.)136 1975 y Ff(\017)46 b Fi(Each)26
b(trace)h(\002le)f(is)g(written)h(so)f(that)h(the)g(output)g(from)f
(the)h(shell)g(sho)n(ws)f(e)o(xactly)i(what)e(the)h(user)g(typed.)38
b(W)-7 b(e)25 b(do)227 2088 y(this)i(by)f(using)h(the)f
Fh(/bin/echo)c Fi(program,)27 b(which)g(not)f(only)h(tests)g(the)f
(shell')-5 b(s)28 b(ability)f(to)f(run)g(programs,)i(b)n(ut)227
2201 y(also)c(sho)n(ws)g(what)g(the)f(user)i(typed.)30
b(F)o(or)22 b(e)o(xample:)227 2426 y Fh(/bin/echo)51
b(-e)i(tsh\\076)f(./myspin1)e(\\046)227 2651 y Fi(Note:)41
b(octal)31 b Ff(n)p Fh(076)d Fi(is)h Fh(>)f Fi(and)j(octal)f
Ff(n)p Fh(046)e Fi(is)h Fh(&)p Fi(.)46 b(These)30 b(are)f(special)j
(shell)e(metacharacters)j(that)d(need)g(to)g(be)227 2764
y(escaped.)g(This)22 b(line)g(represents)j Fh(tsh>)52
b(./myspin1)f(&)p Fi(,)20 b(that)j(is,)e(a)h(user)g(trying)h(to)f(run)g
Fh(./myspin1)17 b Fi(in)22 b(the)227 2877 y(background.)136
3064 y Ff(\017)46 b Fi(There)19 b(are)h(also)f(a)g(fe)n(w)f(special)j
(commands)f(for)f(synchronization)24 b(between)c(the)f(job)h(\(your)g
(shell\))g(and)f(the)h(parent)227 3177 y(process)26 b(\(the)e(dri)n(v)o
(er\))g(and)g(to)g(send)g(Unix)g(signals)h(from)e(the)h(parent)h(to)e
(the)h(job)l(.)p 335 3345 3451 4 v 333 3458 4 113 v 385
3424 a(W)-11 b(AIT)p 792 3458 V 231 w(W)k(ait)23 b(for)h(a)f(sync)i
(signal)g(from)e(the)h(job)g(o)o(v)o(er)f(its)h(synchronizing)k(domain)
c(sock)o(et.)p 3784 3458 V 335 3462 3451 4 v 333 3574
4 113 v 385 3541 a(SIGN)m(AL)p 792 3574 V 126 w(Send)g(a)f(sync)h
(signal)h(to)f(the)f(job)h(o)o(v)o(er)g(its)g(synchronizing)j(domain)e
(sock)o(et.)p 3784 3574 V 335 3578 3451 4 v 333 3691
4 113 v 385 3770 a(NEXT)p 792 3691 V 843 3657 a(Read)f(and)g(print)g
(all)g(responses)i(from)d(the)h(shell)h(until)f(you)g(see)g(the)g(ne)o
(xt)g(shell)g(prompt.)p 3784 3691 V 333 3804 V 792 3804
V 843 3770 a(This)g(command)g(is)f(essential)j(for)e(synchronizing)k
(with)23 b(the)h(shell)g(and)g(mimics)g(the)f(w)o(ay)p
3784 3804 V 333 3917 V 792 3917 V 843 3883 a(people)i(w)o(ait)f(until)g
(the)o(y)g(see)g(the)g(shell)g(prompt)g(until)h(the)o(y)f(type)g(the)g
(ne)o(xt)g(string.)p 3784 3917 V 335 3920 3451 4 v 333
4033 4 113 v 385 3999 a(SIGINT)p 792 4033 V 159 w(Send)g(a)f(SIGINT)f
(signal)i(to)g(the)g(job)l(.)p 3784 4033 V 335 4036 3451
4 v 333 4149 4 113 v 385 4115 a(SIGTSTP)p 792 4149 V
97 w(Send)g(a)f(SIGTSTP)d(signal)25 b(to)f(the)f(job)l(.)p
3784 4149 V 335 4152 3451 4 v 1901 5712 a(10)p eop end
%%Page: 11 11
TeXDict begin 11 10 bop 0 573 a Fi(The)23 b(follo)n(wing)i(table)g
(describes)h(what)d(each)h(trace)h(\002le)e(tests)h(on)g(your)g(shell)g
(against)h(the)f(reference)i(solution.)0 725 y Fc(NO)l(TE:)f
Fi(this)i(table)g(is)f(pro)o(vided)i(so)f(that)g(you)g(can)f(quickly)j
(get)d(a)g(high)h(le)n(v)o(el)g(picture)h(about)f(the)g(testing)h
(traces.)38 b(The)0 838 y(e)o(xplanation)31 b(here)e(is)f(o)o(v)o(er)n
(-simpli\002ed.)45 b(T)-7 b(o)27 b(understand)32 b(what)c(e)o(xactly)h
(each)g(trace)g(\002le)f(does,)i(you)f(need)g(to)f(read)h(the)0
951 y(trace)24 b(\002les.)p 470 1055 2955 4 v 468 1168
4 113 v 520 1134 a(trace00.txt)p 954 1168 V 103 w(Properly)g(terminate)
h(on)f(EOF)-7 b(.)p 3422 1168 V 468 1281 V 520 1247 a(trace01.txt)p
954 1281 V 103 w(Process)24 b(b)n(uilt-in)i(quit)e(command.)p
3422 1281 V 468 1393 V 520 1360 a(trace02.txt)p 954 1393
V 103 w(Run)f(a)g(fore)o(ground)j(job)e(that)g(prints)h(an)f(en)l
(vironment)i(v)n(ariable.)p 3422 1393 V 468 1506 V 520
1472 a(trace03.txt)p 954 1506 V 103 w(Run)d(a)g(synchronizing)28
b(fore)o(ground)e(job)e(without)g(an)o(y)g(ar)n(guments.)p
3422 1506 V 468 1619 V 520 1585 a(trace04.txt)p 954 1619
V 103 w(Run)f(a)g(fore)o(ground)j(job)e(with)f(ar)n(guments.)p
3422 1619 V 468 1732 V 520 1698 a(trace05.txt)p 954 1732
V 103 w(Run)g(a)g(background)k(job)l(.)p 3422 1732 V
468 1845 V 520 1811 a(trace06.txt)p 954 1845 V 103 w(Run)c(a)g(fore)o
(ground)j(job)e(and)g(a)f(background)k(job)l(.)p 3422
1845 V 468 1958 V 520 1924 a(trace07.txt)p 954 1958 V
103 w(Use)c(the)g(jobs)i(b)n(uilt-in)g(command.)p 3422
1958 V 468 2071 V 520 2037 a(trace08.txt)p 954 2071 V
103 w(Send)e(f)o(atal)h(SIGINT)e(to)i(fore)o(ground)i(job)l(.)p
3422 2071 V 468 2184 V 520 2150 a(trace09.txt)p 954 2184
V 103 w(Send)d(SIGTSTP)d(to)k(fore)o(ground)i(job)l(.)p
3422 2184 V 468 2297 V 520 2263 a(trace10.txt)p 954 2297
V 103 w(Send)d(f)o(atal)h(SIGTERM)d(\(15\))j(to)g(a)f(background)k(job)
l(.)p 3422 2297 V 468 2410 V 520 2376 a(trace11.txt)p
954 2410 V 103 w(Child)c(sends)i(SIGINT)d(to)h(itself.)p
3422 2410 V 468 2523 V 520 2489 a(trace12.txt)p 954 2523
V 103 w(Child)g(sends)i(SIGTSTP)20 b(to)k(itself.)p 3422
2523 V 468 2635 V 520 2602 a(trace13.txt)p 954 2635 V
103 w(F)o(orw)o(ard)f(SIGINT)f(to)h(fore)o(ground)j(job)e(only)-6
b(.)p 3422 2635 V 468 2748 V 520 2714 a(trace14.txt)p
954 2748 V 103 w(F)o(orw)o(ard)23 b(SIGTSTP)d(to)k(fore)o(ground)i(job)
e(only)-6 b(.)p 3422 2748 V 468 2861 V 520 2827 a(trace15.txt)p
954 2861 V 103 w(Process)24 b(bg)g(b)n(uilt-in)h(command)g(\(one)f
(job\).)p 3422 2861 V 468 2974 V 520 2940 a(trace16.txt)p
954 2974 V 103 w(Process)g(bg)g(b)n(uilt-in)h(command)g(\(tw)o(o)e
(jobs\).)p 3422 2974 V 468 3087 V 520 3053 a(trace17.txt)p
954 3087 V 103 w(Process)h(fg)f(b)n(uilt-in)j(command)e(\(one)h(job\).)
p 3422 3087 V 468 3200 V 520 3166 a(trace18.txt)p 954
3200 V 103 w(Process)f(fg)f(b)n(uilt-in)j(command)e(\(tw)o(o)g(jobs\).)
p 3422 3200 V 468 3313 V 520 3279 a(trace19.txt)p 954
3313 V 103 w(F)o(orw)o(ard)f(SIGINT)f(to)h(e)n(v)o(ery)h(process)h(in)f
(fore)o(ground)i(process)g(group.)p 3422 3313 V 468 3426
V 520 3392 a(trace20.txt)p 954 3426 V 103 w(F)o(orw)o(ard)d(SIGTSTP)d
(to)k(e)n(v)o(ery)g(process)h(in)f(fore)o(ground)i(process)f(group.)p
3422 3426 V 468 3539 V 520 3505 a(trace21.txt)p 954 3539
V 103 w(Restart)f(e)n(v)o(ery)g(stopped)h(process)h(in)d(process)j
(group.)p 3422 3539 V 468 3652 V 520 3618 a(trace22.txt)p
954 3652 V 103 w(I/O)c(redirection)27 b(\(input\).)p
3422 3652 V 468 3765 V 520 3731 a(trace23.txt)p 954 3765
V 103 w(I/O)22 b(redirection)27 b(\(input)e(and)f(output\).)p
3422 3765 V 468 3877 V 520 3844 a(trace24.txt)p 954 3877
V 103 w(I/O)e(redirection)27 b(\(input)e(and)f(output,)h(b)n(ut)f(dif)n
(ferent)h(order\).)p 3422 3877 V 470 3881 2955 4 v 1901
5712 a(11)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
